!function(){"use strict";function t(t,e){t.when("/",{templateUrl:"app/view/home.jade"}).when("/stream/movies",{templateUrl:"app/view/movies.jade"}).when("/stream/music",{templateUrl:"app/view/music.jade"}).when("/stream/tvshows",{templateUrl:"app/view/tvshows.jade"}).when("/stream/other",{templateUrl:"app/view/other.jade"}).otherwise({redirectTo:"/"}),e.html5Mode(!0)}angular.module("app.services",[]),angular.module("app.controllers",[]),angular.module("app",["ngRoute","ui.bootstrap","app.controllers","app.services","app.templates"]).config(["$routeProvider","$locationProvider",t]),angular.element(document).ready(function(){angular.bootstrap(document,["app"])})}(),function(){"use strict";function t(t,e,n,i){function r(){x.chartSize=window.innerWidth>=1e3?"large":window.innerWidth>=500?"medium":"small"}function o(){x.showBandwidth=!x.showBandwidth,x.showBandwidth&&a()}function a(){x.showYearChart||(x.showYearChart=!0,x.showMonthChart=!1,x.showDayChart=!1,setTimeout(function(){var t=document.getElementById("yearChart").getContext("2d"),e=new Chart(t).Line(L,C);document.getElementById("legend").innerHTML=e.generateLegend()},10))}function s(){x.showMonthChart||(x.showYearChart=!1,x.showMonthChart=!0,x.showDayChart=!1,setTimeout(function(){var t=document.getElementById("monthChart").getContext("2d");new Chart(t).Line(P,C)},10))}function u(){x.showDayChart||(x.showYearChart=!1,x.showMonthChart=!1,x.showDayChart=!0,setTimeout(function(){var t=document.getElementById("dayChart").getContext("2d");new Chart(t).Line(D,C)},10))}function l(){x.showVpn=!x.showVpn,x.showOnOff=!1,x.showCertDl=!1,x.showCert=!1,x.showPass=!1,x.showReboot=!1}function c(){x.showVpn=!1,x.showOnOff=!x.showOnOff,x.showCertDl=!1,x.showCert=!1,x.showPass=!1,x.showReboot=!1}function h(){x.showVpn=!1,x.showOnOff=!1,x.showCertDl=!x.showCertDl,x.showCert=!1,x.showPass=!1,x.showReboot=!1}function f(){x.showVpn=!1,x.showOnOff=!1,x.showCertDl=!1,x.showCert=!x.showCert,x.showPass=!1,x.showReboot=!1}function d(){x.showVpn=!1,x.showOnOff=!1,x.showCertDl=!1,x.showCert=!1,x.showPass=!x.showPass,x.showReboot=!1}function p(){x.showVpn=!1,x.showOnOff=!1,x.showCertDl=!1,x.showCert=!1,x.showPass=!1,x.showReboot=!x.showReboot}function g(){var t=x.transmissionIsOn?"off":"on",e="turning "+t+" transmission...",r="/maintenance/transmission_"+t;i.showLoader(e),n.get(r).success(function(t){x.transmissionIsOn=t.status,document.getElementById("transmission-toggle").checked=x.transmissionIsOn,i.hideLoader()}).error(function(){document.getElementById("transmission-toggle").checked=x.transmissionIsOn,i.showError()})}function m(){var t=x.couchpotatoIsOn?"off":"on",e="turning "+t+" couchpotato...",r="/maintenance/couchpotato_"+t;i.showLoader(e),n.get(r).success(function(t){x.couchpotatoIsOn=t.status,document.getElementById("couchpotato-toggle").checked=x.couchpotatoIsOn,i.hideLoader()}).error(function(){document.getElementById("couchpotato-toggle").checked=x.couchpotatoIsOn,i.showError()})}function v(){var t=x.sickbeardIsOn?"off":"on",e="turning "+t+" sickbeard...",r="/maintenance/sickbeard_"+t;i.showLoader(e),n.get(r).success(function(t){x.sickbeardIsOn=t.status,document.getElementById("sickbeard-toggle").checked=x.sickbeardIsOn,i.hideLoader()}).error(function(){document.getElementById("sickbeard-toggle").checked=x.sickbeardIsOn,i.showError()})}function y(){var t=x.headphonesIsOn?"off":"on",e="turning "+t+" headphones...",r="/maintenance/headphones_"+t;i.showLoader(e),n.get(r).success(function(t){x.headphonesIsOn=t.status,document.getElementById("headphones-toggle").checked=x.headphonesIsOn,i.hideLoader()}).error(function(){document.getElementById("headphones-toggle").checked=x.headphonesIsOn,i.showError()})}function $(t){function e(){swal({title:"Certificate Generated!",type:"success",confirmButtonColor:"#337ab7",confirmButtonText:"Okay",closeOnConfirm:!0},i.hideLoader)}var r="/maintenance/generate?common_name="+encodeURIComponent(t);i.showLoader("Generating..."),n.get(r).success(e).error(e)}function w(t,e){function r(){swal({title:"Username / Password Changed!",type:"success",confirmButtonColor:"#337ab7",confirmButtonText:"Okay",closeOnConfirm:!0},i.hideLoader)}var o="/maintenance/password?username="+encodeURIComponent(t)+"&password="+encodeURIComponent(e);i.showLoader("Changing..."),n.get(o).success(r).error(r)}function b(){function t(){swal({title:"Restarting",text:"You may have to wait a minute for the server to come back up.",type:"success",confirmButtonColor:"#337ab7",confirmButtonText:"Okay",closeOnConfirm:!0},i.hideLoader)}i.showLoader("Restarting...");var e="/maintenance/reboot?areyousure=yes";n.get(e).success(t).error(t)}var x=this;x.usedDisk=jinja.usedDisk,x.totalDisk=jinja.totalDisk,x.diskPerc=100*(x.usedDisk/x.totalDisk),x.numMovies=Math.floor((x.totalDisk-x.usedDisk)/4),x.numTVShows=Math.floor((x.totalDisk-x.usedDisk)/1.5),x.numSongs=Math.floor((x.totalDisk-x.usedDisk)/.005),x.diskAlmostFull=x.diskPerc>=80&&x.diskPerc<95,x.diskFull=x.diskPerc>=95,x.discProgressType=x.diskFull&&"danger"||x.diskAlmostFull&&"warning",x.bandwidthThisMonth=jinja.bandwidthThisMonth,x.bandwidthPerMonth=jinja.bandwidthPerMonth,x.bandwidthPerc=100*(x.bandwidthThisMonth/x.bandwidthPerMonth),x.allTimeTotalBand=jinja.allTimeTotalBand,x.libCongress=+(x.allTimeTotalBand/1e4).toFixed(3),x.bandAlmostFull=x.bandwidthPerc>=80&&x.bandwidthPerc<95,x.bandFull=x.bandwidthPerc>=95,x.bandProgressType=x.bandFull&&"danger"||x.bandAlmostFull&&"warning",x.cpu=jinja.cpu,x.ram=jinja.ram,x.uptime=moment.unix(jinja.bootTime).fromNow(!0),x.hideBandwidth=!0,x.chartSize="medium",x.hostname=e.host(),x.showVpn=!1,x.showOnOff=!1,x.showCert=!1,x.showCertDl=!1,x.showPass=!1,x.showReboot=!1,x.transmissionIsOn=jinja.transmissionIsOn,x.couchpotatoIsOn=jinja.couchpotatoIsOn,x.sickbeardIsOn=jinja.sickbeardIsOn,x.headphonesIsOn=jinja.headphonesIsOn,x.toggleCharts=o,x.toggleYearChart=a,x.toggleMonthChart=s,x.toggleDayChart=u,x.toggleVpn=l,x.toggleOnOff=c,x.toggleCert=f,x.toggleCertDl=h,x.togglePass=d,x.toggleReboot=p,x.toggleTransmission=g,x.toggleCouchpotato=m,x.toggleSickbeard=v,x.toggleHeadphones=y,x.generateCert=$,x.changePassword=w,x.reboot=b;for(var C={scaleGridLineColor:"rgba(0,0,0,.05)",scaleFontFamily:"'Open Sans'",showTooltips:!1,responsive:!0,datasetStrokeWidth:0,pointDot:!1},S=[],k=23;k>=0;k--)S.push(moment().subtract(k,"hours").format("ha"));for(var T=[],A=29;A>=0;A--)T.push(moment().subtract(A,"days").format("Do"));for(var E=[],M=11;M>=0;M--)E.push(moment().subtract(M,"months").format("MMM"));var O=parseInt(moment(jinja.currentTime).format("H")),D={labels:S,datasets:[{label:"Transmit",fillColor:"rgba(220,220,220,0.2)",pointHighlightStroke:"rgba(220,220,220,1)",data:_.slice(jinja.pastDayTx,O+1).concat(_.slice(jinja.pastDayTx,0,O+1)),strokeColor:"rgba(220,220,220,1)"},{label:"Receive",fillColor:"rgba(151,187,205,0.2)",pointHighlightStroke:"rgba(151,187,205,1)",data:_.slice(jinja.pastDayRx,O+1).concat(_.slice(jinja.pastDayRx,0,O+1)),strokeColor:"rgba(151,187,205,1)"}]},P={labels:T,datasets:[{label:"Transmit",fillColor:"rgba(220,220,220,0.2)",pointHighlightStroke:"rgba(220,220,220,1)",data:jinja.pastMonthTx,strokeColor:"rgba(220,220,220,1)"},{label:"Receive",fillColor:"rgba(151,187,205,0.2)",pointHighlightStroke:"rgba(151,187,205,1)",data:jinja.pastMonthRx,strokeColor:"rgba(151,187,205,1)"}]},L={labels:E,datasets:[{label:"Transmit",fillColor:"rgba(220,220,220,0.2)",pointHighlightStroke:"rgba(220,220,220,1)",data:jinja.pastYearTx,strokeColor:"rgba(220,220,220,1)"},{label:"Receive",fillColor:"rgba(151,187,205,0.2)",pointHighlightStroke:"rgba(151,187,205,1)",data:jinja.pastYearRx,strokeColor:"rgba(151,187,205,1)"}]};r(),window.onresize=function(){r()}}angular.module("app.controllers").controller("HomeCtrl",t),t.$inject=["$scope","$location","$http","navService"]}(),function(){"use strict";function t(t,n){function i(t){return _.isObject(t)}function r(){e=[];var t=["avi","flv","ogv","ogg","m4v","mkv","mov","mp4","mpg","mp2","mpeg","mpe","mpv","vob","webm","wmv"];return _.forOwn(jinja.movies,function(n,r){if(i(n)){var o=r,a=_.findKey(n,function(t){return i(t)?!1:!!~t.indexOf("poster")}),s=_.findKey(n,function(e){if(i(e))return!1;var n=e.split(".").pop().toLowerCase();return _.contains(t,n)});s&&e.push({title:o,poster:n[a],file:n[s]})}}),e}var o=this;o.movies=e||r(),o.username=cred.username,o.password=cred.password,o.host=n.host()}var e;angular.module("app.controllers").controller("MoviesCtrl",t),t.$inject=["$scope","$location"]}(),function(){"use strict";function t(t,r,o){function a(t){return _.isObject(t)}function s(){e=[],n=[],i={};var t=["aac","flac","m4a","ogg","oga","mp3","opus","wav","wna"],r=_(Howler._codecs).omit(function(t){return!t}).keys().value();return _.forOwn(jinja.music,function(o,s){if(a(o)){var u=[],l=[],c=!1;_.forOwn(o,function(e,n){if(a(e)){var o=[],s=!1;if(_.forOwn(e,function(e,n){if(!a(e)){var i=e.split(".").pop().toLowerCase();_.contains(t,i)&&(_.contains(r,i)||(c=!0,s=!0),o.push({title:n.replace("."+i,""),file:e}))}}),!_.isEmpty(o)){o.sort(function(t,e){return t.title<e.title?-1:t.title>e.title?1:0}),_.map(o,function(t){t.title=t.title.replace(/^[\d]+ - /,""),s||(t.uid=_.uniqueId(),i[t.uid]="/media/music"+t.file)});var h=_.findKey(e,function(t){return a(t)?!1:!!~t.indexOf("folder")});return s?(l.push({name:n,art:e[h],tracks:o}),void 0):(u.push({name:n,art:e[h],tracks:o}),void 0)}}}),c&&n.push({name:s,albums:l}),_.isEmpty(u)||e.push({name:s,albums:u})}}),e}function u(){$.showNonSupported=!$.showNonSupported}function l(t){"desktop"!==x&&c(t)}function c(t){$.nowPlaying=t,$.showPlayer=!0,f(),w=new Howl({urls:[$.playableTracks[t]],autoplay:!0,buffer:"desktop"===x,onend:v,onplay:function(){$.isPlaying=!0,b=w._duration,y()}})}function h(){$.nowPlaying=null,$.showPlayer=!1,f()}function f(){_.isObject(w)&&(w.stop(),$.isPlaying=!1,$.progress=0,$.elapsed=0)}function d(){_.isObject(w)&&(w.pause(),$.isPlaying=!1)}function p(){_.isObject(w)&&(w.play(),$.isPlaying=!0)}function g(t){if(_.isObject(w)){var e=t.currentTarget.offsetWidth,n=t.offsetX/e,i=n*b;$.elapsed=i,w.pos(i)}}function m(){var t=parseInt($.nowPlaying,10);1!==t&&c(t-1)}function v(){if(!_.isNull($.nowPlaying)){var t=parseInt($.nowPlaying,10);return t===_.keys($.playableTracks).length?h():(c(t+1),void 0)}}function y(){!angular.isDefined(C)&&_.isObject(w)&&(C=o(function(){var t=$.elapsed<b&&$.isPlaying;t&&($.elapsed+=.2,$.progress=$.elapsed/b<1?100*($.elapsed/b):100)},200))}var $=this;$.artists=e||s(),$.nonSupportedArtists=n,$.playableTracks=i,$.host=r.host(),$.nowPlaying=null,$.isPlaying=!1,$.showPlayer=!1,$.elapsed=0,$.progress=0,$.showNonSupported=!1,$.toggleNonSupported=u,$.singleClick=l,$.load=c,$.play=p,$.pause=d,$.seek=g,$.fullstop=h,$.next=v,$.previous=m;var w,b;t.$on("$destroy",function(){_.isObject(w)&&w.stop()});var x="desktop";/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(x="mobile");var C}var e,n,i;angular.module("app.controllers").controller("MusicCtrl",t),t.$inject=["$scope","$location","$interval"]}(),function(){"use strict";function t(t,e){function n(){o.toggled=!o.toggled}function i(t,e){o.loading=!0,o.loadingMessage=_.isUndefined(e)?"":e}function r(){o.loading=!1}var o=this;o.location=e,o.toggled=!1,o.loading=!1,o.toggle=n,t.$on("nav:showLoader",i),t.$on("nav:hideLoader",r)}angular.module("app.controllers").controller("NavCtrl",t),t.$inject=["$scope","$location"]}(),function(){"use strict";function t(){function t(t){return _.isObject(t)}function n(t){return _.kebabCase(t)}function i(t){return e=r(t)}function r(e){var n=[],i=[];return _.forOwn(e,function(e,o){return t(e)?(i.push({name:o,obj:r(e)}),void 0):(n.push({name:o,obj:e}),void 0)}),i.sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}),n.sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}),i.concat(n)}var o=this;o.files=e||i(jinja.other),o.isFolder=t,o.removeSpaces=n}var e;angular.module("app.controllers").controller("OtherCtrl",t),t.$inject=["$scope","$location"]}(),function(){"use strict";function t(t,n){function i(t){return _.isObject(t)}function r(){e=[];var t=["avi","flv","ogv","ogg","m4v","mkv","mov","mp4","mpg","mp2","mpeg","mpe","mpv","vob","webm","wmv"];return _.forOwn(jinja.tvshows,function(n,r){if(i(n)){var o=[];_.forOwn(n,function(e,n){if(i(e)&&".actors"!==n){var r=[];_.forOwn(e,function(e,n){if(!i(e)){var o=n.split(".").pop().toLowerCase();_.contains(t,o)&&r.push({title:n.replace("."+o,""),file:e})}}),_.isEmpty(r)||(r.sort(function(t,e){return t.title<e.title?-1:t.title>e.title?1:0}),o.push({title:n,episodes:r}))}}),_.isEmpty(o)||(o.sort(function(t,e){return t.title<e.title?-1:t.title>e.title?1:0}),e.push({title:r,seasons:o,poster:n["poster.jpg"],banner:n["banner.jpg"],numSeasons:o.length,numEpisodes:_.reduce(o,function(t,e){return t+e.episodes.length},0)}))}}),e}var o=this;o.shows=e||r(),o.username=cred.username,o.password=cred.password,o.host=n.host()}var e;angular.module("app.controllers").controller("TVShowsCtrl",t),t.$inject=["$scope","$location"]}(),function(){"use strict";function t(t){function e(e){return t.$broadcast("nav:showLoader",e),t.$$phase||t.$apply(),r}function n(){return t.$broadcast("nav:hideLoader"),t.$$phase||t.$apply(),r}function i(){swal({title:"Argh.",text:"Something didn't work right, try that operation again.",type:"error",confirmButtonText:"Okay",confirmButtonColor:"#DD6B55"},n)}var r={notice:null,showLoader:e,hideLoader:n,showError:i};return r}angular.module("app.services").factory("navService",t),t.$inject=["$rootScope","$timeout","$location"]}();